NASA engineers managed on Monday to reproduce the type of computer crashes that have befallen the Mars rover Spirit since last week. If the root cause has been found, as engineers hope, the rover may return to complete health and resume its science mission in a week.
The suspected cause will be familiar to any computer user who multitasks too much: too many files were open. A flaw in the rover programs allows the creation of an unlimited number of files, and the computer crashed trying to handle them, mission managers said.
''It should only take a couple of days to work around it,'' a manager, Dr. Mark Adler, said. ''I think within, on the order of a week, if we're right, we can possibly get the system back online.''
A few hours earlier at a news conference, another manager, Jennifer Trosper, reported progress on identifying the problem, but estimated that it would be two to three weeks before the rover returned to work.
The same flaw affects the Spirit's twin, the rover Opportunity, which landed early on Sunday morning on the opposite side of Mars. Its programming will also be patched.
''Already, the Opportunity guys know there might be a problem with the number of files,'' Dr. Adler said. ''And they're going to make sure they don't get anywhere near that.''
The Opportunity has worked flawlessly, and over the next few days it will finish taking a high-resolution 360-degree color panorama of its landing site, a shallow crater 20 yards wide. In the crater are exposed sections of bedrock that the scientists are eager to examine.
''This is like a holy grail for a geologist, to be able to see these incredible rocks that are in their native habitat,'' said Dr. James F. Bell III, a professor of astronomy at Cornell and the team leader for the panoramic cameras on the rovers.
The Spirit, which arrived three weeks ago, experienced few problems through its initial checks and deployment. On Wednesday, it lost touch as it began to examine its first rock. Mission managers initially worried that they might have lost the rover entirely. But each day since then, the news has improved. The controllers were able to contact the rover and elicit a simple reply beep. The rover sent information showing that its power and heating systems were working properly.
The flight software, however, was still caught in a repeating cycle of crashing and restarting, and the rover, unable to shut down properly at night, was draining its batteries. On a hunch that the problem might be with part of the rover's memory, controllers commanded the Spirit to ignore that part of memory when starting up. The software stopped crashing, and the rover entered a stable, though limited, mode. It also then shut down properly, and the batteries were able to charge.
The troublesome memory is flash memory, similar to the cards that store photographs on digital cameras. Flash memory retains information when power is off, as when the rover shuts down at night. Data from experiments and other necessary information are stored there.
The rover computer also has random access memory, or RAM, the same type found in personal computers. RAM is much faster than flash memory, but forgets without power.
The programming does not limit the files that can be stored in flash memory. The Spirit has ''on the order of 10,000 or more, maybe 16,000 files,'' Dr. Adler said.
Because it is slow to read or write from flash memory, the programming copies often-used information to RAM. But with so many files, the programming ran out of RAM.
On Monday, engineers finally reproduced the problem. The flight controllers plan to try to download some of the information in the flash memory that should show what the Spirit was trying at the time of the malfunction.
''We still have to get data from the vehicle to verify that what we did in the test bed is what happened on the vehicle,'' Dr. Adler said.
Even as they worked to confirm their theory, engineers worked on a repair.
''It's not a theory that this is a problem on the vehicle, in the sense that we've verified it in the test bed,'' Dr. Adler said. ''So we know, even if this doesn't turn out to be what hit Spirit, it is something we have to work around on both vehicles.''
